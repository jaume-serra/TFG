<%- include('../partials/head') %>
    <%- include('../partials/navbar') %>

        <body>

            <div class="w-11/12 mx-auto relative shadow-2xl mb-24 rounded  overflow-hidden">

                <div class="pt-10">

                    <div class="flex flex-col">
                        <div class="overflow-x-auto shadow-md sm:rounded-lg">
                            <div class="inline-block min-w-full align-middle">
                                <div class="overflow-hidden ">
                                    <% if(places.length==0) { %>
                                        <p class="p-2 text-xl h-screen text-center">Actualment no tens cap traster ni
                                            pàrquing
                                            llogat. Pots visitar el <a
                                                class="text-blue-700 hover:text-blue-400 hover:underline"
                                                href="/mapa">Mapa</a> per descobrir totes les ofertes.
                                        </p>
                                        <% } else {%>
                                            <table class="min-w-full divide-y divide-gray-200 table-fixed ">
                                                <thead class="bg-gray-100 ">
                                                    <tr>
                                                        <th scope="col" class="p-4">
                                                            <div class="flex items-center">
                                                                <input id="checkbox-all" type="checkbox"
                                                                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500">
                                                                <label for="checkbox-all"
                                                                    class="sr-only">checkbox</label>
                                                            </div>
                                                        </th>
                                                        <th scope="col"
                                                            class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase">
                                                            Propietari
                                                        </th>
                                                        <th scope="col"
                                                            class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase">
                                                            Tipus
                                                        </th>
                                                        <th scope="col"
                                                            class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase">
                                                            Mides
                                                        </th>
                                                        <th scope="col"
                                                            class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase">
                                                            Preu
                                                        </th>
                                                        <th scope="col"
                                                            class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase">
                                                            Ciutat
                                                        </th>
                                                        <th scope="col"
                                                            class="py-3 px-6 text-xs font-medium tracking-wider text-center text-gray-700 uppercase">
                                                            Anul·lar lloguer
                                                        </th>

                                                    </tr>
                                                </thead>
                                                <tbody class="bg-white divide-y divide-gray-200 ">
                                                    <% places.forEach(place=> { %>

                                                        <tr class="hover:bg-gray-100">
                                                            <td class="p-4 w-4">
                                                                <div class="flex items-center">
                                                                    <input id="checkbox-table-1" type="checkbox"
                                                                        class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500">
                                                                    <label for="checkbox-table-1"
                                                                        class="sr-only">checkbox</label>
                                                                </div>
                                                            </td>

                                                            <td
                                                                class="py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap ">
                                                                <%= place.email %>
                                                            </td>
                                                            <td
                                                                class="py-4 px-6 text-sm font-medium text-gray-500 whitespace-nowrap ">
                                                                <%- place.type=="storage" ? "Traster" : "Parking" %>
                                                            </td>
                                                            <td
                                                                class="py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap ">
                                                                <%= place.measures %>
                                                            </td>
                                                            <td
                                                                class="py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap ">
                                                                <%= place.price %>
                                                            </td>
                                                            <td
                                                                class="py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap ">
                                                                <%= place.city %>
                                                            </td>
                                                            <td
                                                                class="py-4 px-6 text-sm font-medium text-center  whitespace-nowrap">
                                                                <form action="/user/sparcerent/anular" method="POST"
                                                                    onsubmit="return confirm('Estàs segur que vols cancel·lar el lloguer?');">
                                                                    <button type="submit">
                                                                        <svg class="h-6 w-6 "
                                                                            xmlns="http://www.w3.org/2000/svg"
                                                                            aria-hidden="true" role="img" height="1em"
                                                                            preserveAspectRatio="xMidYMid meet"
                                                                            viewBox="0 0 1024 1024">
                                                                            <path fill="#FF0000"
                                                                                d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z" />
                                                                        </svg>
                                                                        <input type="text" value="<%- place._id %>"
                                                                            name="id" class="hidden">
                                                                        <input type="text" value="<%- place.email %>"
                                                                            name="email" class="hidden">

                                                                    </button>
                                                                </form>
                                                            </td>

                                                        </tr>
                                                        <% }) %>

                                                </tbody>
                                            </table>
                                            <% } %>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </body>


        <%- include("../partials/footer") %>